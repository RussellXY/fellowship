var le=Object.defineProperty;var z=t=>{throw TypeError(t)};var de=(t,e,n)=>e in t?le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var m=(t,e,n)=>de(t,typeof e!="symbol"?e+"":e,n),X=(t,e,n)=>e.has(t)||z("Cannot "+n);var s=(t,e,n)=>(X(t,e,"read from private field"),n?n.call(t):e.get(t)),L=(t,e,n)=>e.has(t)?z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),_=(t,e,n,a)=>(X(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var c;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(c||(c={}));const fe=(()=>{let t=0;return()=>t++})(),ue=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),pe=new Error("called FFmpeg.terminate()");var O,T,A,P,k,B,R;class he{constructor(){L(this,O,null);L(this,T,{});L(this,A,{});L(this,P,[]);L(this,k,[]);m(this,"loaded",!1);L(this,B,()=>{s(this,O)&&(s(this,O).onmessage=({data:{id:e,type:n,data:a}})=>{switch(n){case c.LOAD:this.loaded=!0,s(this,T)[e](a);break;case c.MOUNT:case c.UNMOUNT:case c.EXEC:case c.FFPROBE:case c.WRITE_FILE:case c.READ_FILE:case c.DELETE_FILE:case c.RENAME:case c.CREATE_DIR:case c.LIST_DIR:case c.DELETE_DIR:s(this,T)[e](a);break;case c.LOG:s(this,P).forEach(o=>o(a));break;case c.PROGRESS:s(this,k).forEach(o=>o(a));break;case c.ERROR:s(this,A)[e](a);break}delete s(this,T)[e],delete s(this,A)[e]})});L(this,R,({type:e,data:n},a=[],o)=>s(this,O)?new Promise((r,l)=>{const p=fe();s(this,O)&&s(this,O).postMessage({id:p,type:e,data:n},a),s(this,T)[p]=r,s(this,A)[p]=l,o==null||o.addEventListener("abort",()=>{l(new DOMException(`Message # ${p} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ue));m(this,"load",({classWorkerURL:e,...n}={},{signal:a}={})=>(s(this,O)||(_(this,O,e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/stream/assets/worker-DYSz7Krg.js",import.meta.url),{type:"module"})),s(this,B).call(this)),s(this,R).call(this,{type:c.LOAD,data:n},void 0,a)));m(this,"exec",(e,n=-1,{signal:a}={})=>s(this,R).call(this,{type:c.EXEC,data:{args:e,timeout:n}},void 0,a));m(this,"ffprobe",(e,n=-1,{signal:a}={})=>s(this,R).call(this,{type:c.FFPROBE,data:{args:e,timeout:n}},void 0,a));m(this,"terminate",()=>{const e=Object.keys(s(this,A));for(const n of e)s(this,A)[n](pe),delete s(this,A)[n],delete s(this,T)[n];s(this,O)&&(s(this,O).terminate(),_(this,O,null),this.loaded=!1)});m(this,"writeFile",(e,n,{signal:a}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),s(this,R).call(this,{type:c.WRITE_FILE,data:{path:e,data:n}},o,a)});m(this,"mount",(e,n,a)=>{const o=[];return s(this,R).call(this,{type:c.MOUNT,data:{fsType:e,options:n,mountPoint:a}},o)});m(this,"unmount",e=>{const n=[];return s(this,R).call(this,{type:c.UNMOUNT,data:{mountPoint:e}},n)});m(this,"readFile",(e,n="binary",{signal:a}={})=>s(this,R).call(this,{type:c.READ_FILE,data:{path:e,encoding:n}},void 0,a));m(this,"deleteFile",(e,{signal:n}={})=>s(this,R).call(this,{type:c.DELETE_FILE,data:{path:e}},void 0,n));m(this,"rename",(e,n,{signal:a}={})=>s(this,R).call(this,{type:c.RENAME,data:{oldPath:e,newPath:n}},void 0,a));m(this,"createDir",(e,{signal:n}={})=>s(this,R).call(this,{type:c.CREATE_DIR,data:{path:e}},void 0,n));m(this,"listDir",(e,{signal:n}={})=>s(this,R).call(this,{type:c.LIST_DIR,data:{path:e}},void 0,n));m(this,"deleteDir",(e,{signal:n}={})=>s(this,R).call(this,{type:c.DELETE_DIR,data:{path:e}},void 0,n))}on(e,n){e==="log"?s(this,P).push(n):e==="progress"&&s(this,k).push(n)}off(e,n){e==="log"?_(this,P,s(this,P).filter(a=>a!==n)):e==="progress"&&_(this,k,s(this,k).filter(a=>a!==n))}}O=new WeakMap,T=new WeakMap,A=new WeakMap,P=new WeakMap,k=new WeakMap,B=new WeakMap,R=new WeakMap;var Y;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(Y||(Y={}));const Ee=new Error("failed to get response body reader"),me=new Error("failed to complete download"),Re="Content-Length",we=t=>new Promise((e,n)=>{const a=new FileReader;a.onload=()=>{const{result:o}=a;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},a.onerror=o=>{var r,l;n(Error(`File could not be read! Code=${((l=(r=o==null?void 0:o.target)==null?void 0:r.error)==null?void 0:l.code)||-1}`))},a.readAsArrayBuffer(t)}),ge=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await we(t);else return new Uint8Array;return new Uint8Array(e)},Oe=async(t,e)=>{var o;const n=await fetch(t);let a;try{const r=parseInt(n.headers.get(Re)||"-1"),l=(o=n.body)==null?void 0:o.getReader();if(!l)throw Ee;const p=[];let i=0;for(;;){const{done:y,value:S}=await l.read(),D=S?S.length:0;if(y){if(r!=-1&&r!==i)throw me;e&&e({url:t,total:r,received:i,delta:D,done:y});break}p.push(S),i+=D,e&&e({url:t,total:r,received:i,delta:D,done:y})}const u=new Uint8Array(i);let h=0;for(const y of p)u.set(y,h),h+=y.length;a=u.buffer}catch(r){console.log("failed to send download progress event: ",r),a=await n.arrayBuffer()}return a},J=async(t,e,n=!1,a)=>{const o=n?await Oe(t,a):await(await fetch(t)).arrayBuffer(),r=new Blob([o],{type:e});return URL.createObjectURL(r)},ne=document.getElementById("transcodeStatus"),K=document.getElementById("transcodeText"),ae=document.getElementById("transcodeBar"),f={NONE:"none",TRANSCODING:"doing",DONE:"done",ERROR:"error",SKIPPED:"skipped"},g={NONE:"none",UPLOADING:"uploading",DONE:"done",ERROR:"error"};console.log("[DEBUG]",{crossOriginIsolated:window.crossOriginIsolated,sab:typeof SharedArrayBuffer,location:location.href});const M=document.getElementById("autoUploadAfterTranscode");function ye(){return M==null?void 0:M.checked}let F=null,I=null,U=!1;function Se(){if(I&&I.readyState===WebSocket.OPEN)return;const e=`${location.protocol==="https:"?"wss":"ws"}://${location.host}/ws/stream`;I=new WebSocket(e);let n=null;I.onopen=()=>{n=setInterval(()=>{I.readyState===WebSocket.OPEN&&I.send(JSON.stringify({type:"keepalive"}))},25e3),console.log("[WS] stream connected")},I.onclose=()=>{clearInterval(n),console.warn("[WS] stream disconnected")},I.onerror=a=>{clearInterval(n),console.warn("[WS] stream error",a)},I.onmessage=a=>{let o;try{o=JSON.parse(a.data)}catch{console.warn("[WARN] failed to parse websocket message");return}console.log("receive websocket message"),o.type==="stream-status"&&(o.status==="error"&&d("âŒ æ¨æµå‡ºé”™ï¼Œè¯·è”ç³»ç®¡ç†å‘˜","error"),o.status==="stopped"&&d("â¹ æ¨æµå·²ç»“æŸ","info"),o.status==="running"&&d("âœ… æ¨æµä¸­","ok"),o.status==="info"&&d(`${o.message}`,"info"))}}async function x(){if(F)return F;const t=await fetch("/api/internal/admin-token");if(!t.ok)throw new Error("æ— æ³•è·å– admin token");return F=(await t.json()).token,F}const E=[],j=new Set,q=document.getElementById("playlist"),V=document.getElementById("emptyTip"),Z=document.getElementById("status"),C=document.getElementById("mode"),$=document.getElementById("loopSelector"),H=document.getElementById("loopTarget"),Ne=document.getElementById("fileInput");function oe(t){return`${t.name}|${t.size}|${t.lastModified}`}function De(t){return(t/1024/1024).toFixed(1)+" MB"}function d(t,e=""){Z.textContent=t,Z.className="status "+e}function w(){if(q.innerHTML="",H.innerHTML="",E.length===0){V.style.display="block",$.classList.add("hidden");return}V.style.display="none",E.forEach((t,e)=>{const n=t.originalFile;let a="",o="";t.transcodeStatus===f.DONE||t.transcodeStatus===f.SKIPPED?(a="âœ… å·²è½¬ç ",o="ok"):t.transcodeStatus===f.TRANSCODING?(a="â³ æ­£åœ¨è½¬ç ",o="info"):t.transcodeStatus===f.ERROR&&(a="âŒ è½¬ç å¤±è´¥",o="error");let r="",l="";t.cacheStatus===g.DONE?(r="ğŸ“¦ å·²ç¼“å­˜",l="ok"):t.cacheStatus===g.UPLOADING?(r="ğŸ“¦ ä¸Šä¼ ä¸­",l="info"):t.cacheStatus===g.ERROR&&(r="ğŸ“¦ ä¸Šä¼ å¤±è´¥",l="error");let p=`
            <div class="actions">
                <button onclick="removeItem(${e})">ç§»é™¤</button>
            </div>
        `;t.transcodeStatus===f.ERROR&&(p=`
                <div class="actions">
                <button onclick="retryTranscode(${e})">ğŸ” é‡è¯•</button>
                <button onclick="removeItem(${e})">ç§»é™¤</button>
                </div>
            `),t.cacheStatus===g.ERROR&&(p=`
                <div class="actions">
                <button onclick="retryCacheUpload(${e})">ğŸ“¦ é‡è¯•ä¸Šä¼ </button>
                <button onclick="removeItem(${e})">ç§»é™¤</button>
                </div>
            `);const i=document.createElement("li");i.innerHTML=`
            <span>
                ${e+1}. ${n.name}
                <span class="small">(${De(n.size)})</span>
                ${a?`<span class="small ${o}" style="margin-left:8px;">${a}</span>`:""}
                ${r?`<span class="small ${l}" style="margin-left:6px;">${r}</span>`:""}
            </span>
            ${p}
            `,q.appendChild(i);const u=document.createElement("option");u.value=e,u.textContent=n.name,H.appendChild(u)}),C.value==="loop"&&$.classList.remove("hidden")}async function Ie(t){const e=E[t];e&&(e.transcodeStatus=f.NONE,w(),d(`è¯·ç‚¹å‡»å¼€å§‹æ¨æµæ¥é‡æ–°è½¬ç ï¼š${e.originalFile.name}`))}async function Ae(t){const e=E[t];if(!(!e||e.transcodeStatus!==f.DONE))try{e.cacheStatus=g.UPLOADING,w(),await se(e,e.transcodedFile,e.fingerprint),e.cacheStatus=g.DONE}catch{console.warn(`[WARN] failed to upload transcoded video: ${e.originalFile.name}`),e.cacheStatus=g.ERROR}finally{w()}}function Le(){return E.some(t=>t.transcodeStatus===f.ERROR)}function Te(){return E.some(t=>t.transcodeStatus===f.DONE||t.transcodeStatus===f.SKIPPED)}function be(t){const n=E[t].originalFile;j.delete(oe(n)),E.splice(t,1),w()}async function Pe(t){const e=await t.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",e);return[...new Uint8Array(n)].map(a=>a.toString(16).padStart(2,"0")).join("")}async function Q(t){const e=await x(),n=await fetch("/api/stream/check",{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":e},body:JSON.stringify({fingerprint:t})});return n.ok?await n.json():null}function W(){ne.style.display="none"}function re(){const t=navigator.userAgent;if(/^((?!chrome|android).)*safari/i.test(t))return!1;let n=!1;try{n=typeof SharedArrayBuffer<"u"}catch{n=!1}return!ke()&&n&&"Worker"in window}function ke(){return/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)}function _e(t){if(E.length===1)return!1;const e=E.some(n=>n.transcodeStatus===f.ERROR);return!(t===E.length-1&&!e)}async function Ue(){if(E.length===0){d("âŒ æ’­æ”¾åˆ—è¡¨ä¸ºç©º","error");return}const t=C.value,e=new FormData;d("â³ å‡†å¤‡æ¨æµâ€¦");const n=await x(),a=re();d(a?"ğŸ–¥ï¸ æ¡Œé¢ç¯å¢ƒï¼Œä½¿ç”¨å®¢æˆ·ç«¯è½¬ç â€¦":"ğŸ“± ç§»åŠ¨ç«¯æˆ–ä¸æ”¯æŒè½¬ç ï¼Œä½¿ç”¨æœåŠ¡å™¨è½¬ç â€¦");const o=[],r=[];if(t==="loop"){const i=Number(H.value),u=E[i],h=u.originalFile,y=u.fingerprint,S=await Q(y);if(S!=null&&S.exists)r.push({filePath:S.path,index:i}),u.transcodeStatus=f.DONE,w();else{if(!a){d("âŒ å½“å‰ç¯å¢ƒä¸æ”¯æŒå®¢æˆ·ç«¯è½¬ç ","error");return}console.log("[INFO] å¼€å§‹è½¬ç ..."),v(0,"å‡†å¤‡è½¬ç ç¬¬ 1 / 1 ä¸ªè§†é¢‘"),u.transcodeStatus=f.TRANSCODING,w();const D=await te(h,0,1);o.push({file:D,fingerprint:y,index:i}),u.transcodeStatus=f.DONE,w()}e.append("loopIndex",i)}else{const i=E.length;for(let u=0;u<E.length;u++){const h=E[u];if(h.transcodeStatus===f.DONE||h.transcodeStatus===f.SKIPPED){h.transcodeStatus=f.SKIPPED;continue}if(h.transcodeStatus===f.ERROR)continue;const y=h.originalFile,S=h.fingerprint,D=await Q(S);if(D!=null&&D.exists){r.push({filePath:D.path,index:u}),h.transcodeStatus=f.NONE,h.cacheStatus=g.DONE,w();continue}if(!a){d("âŒ å½“å‰ç¯å¢ƒä¸æ”¯æŒå®¢æˆ·ç«¯è½¬ç ","error");return}v(0,`å‡†å¤‡è½¬ç ç¬¬ ${u+1} / ${i} ä¸ªè§†é¢‘ï¼š${y.name}`),h.transcodeStatus=f.TRANSCODING,w(),console.log("[INFO] å¼€å§‹è½¬ç ...");try{const b=await te(y,u,i);if(o.push({file:b,fingerprint:S,index:u}),h.transcodedFile=b,h.transcodeStatus=f.DONE,w(),ye()&&_e(u))try{h.cacheStatus=g.UPLOADING,w(),await se(h,b,S)}catch(ce){console.warn("[cache] upload failed",ce)}finally{w()}}catch(b){if(String(b==null?void 0:b.message).includes("called FFmpeg.terminate()")){h.transcodeStatus=f.NONE,d("è½¬ç å–æ¶ˆ"),w(),W();return}else h.transcodeStatus=f.ERROR;u==i-1&&W(),w();continue}}}if(r.length==0&&o.length==0){d("æ–‡ä»¶è½¬ç å¤±è´¥","error");return}for(const i of o)i.cacheStatus==g.DONE&&i.cachedPath.length>0?r.push({filePath:i.cachedPath,index:i.index}):(e.append("files",i.file,i.file.name),e.append("fingerprints",i.fingerprint),e.append("indexs",i.index));o.length>0&&e.append("clientTranscoded","1");for(const i of r)e.append("existing",JSON.stringify(i));if(e.append("mode",t),W(),Le()){if(!Te()){alert("âŒ æ‰€æœ‰è§†é¢‘å‡è½¬ç å¤±è´¥ï¼Œæ— æ³•å¼€å§‹æ¨æµ"),d("âŒ è½¬ç å¤±è´¥ï¼Œè¯·å¤„ç†åé‡è¯•","error");return}if(d("âš ï¸ è½¬ç å®Œæˆï¼Œå­˜åœ¨å¤±è´¥è§†é¢‘ï¼Œç­‰å¾…ç¡®è®¤â€¦"),!window.confirm(`âš ï¸ æœ‰è§†é¢‘è½¬ç å¤±è´¥ã€‚

ç‚¹å‡»ã€Œç¡®å®šã€å°†å¿½ç•¥å¤±è´¥çš„è§†é¢‘ï¼Œä»…æ¨æµå·²è½¬ç æˆåŠŸçš„å†…å®¹ã€‚
ç‚¹å‡»ã€Œå–æ¶ˆã€è¿”å›å¤„ç†å¤±è´¥è§†é¢‘ï¼ˆé‡è¯•æˆ–ç§»é™¤ï¼‰ã€‚`)){d("â¸ å·²å–æ¶ˆæ¨æµï¼Œè¯·å¤„ç†å¤±è´¥çš„è§†é¢‘");return}}d("ğŸ“¡ æ­£åœ¨å¯åŠ¨æ¨æµâ€¦");const l=await fetch("/api/stream/start",{method:"POST",headers:{"x-admin-token":n},body:e}),p=await l.text();l.ok?d("âœ… æ¨æµä¸­","ok"):d("âŒ "+p,"error")}async function ve(){const t=await x();(await fetch("/api/stream/stop",{method:"POST",headers:{"x-admin-token":t}})).ok||d("è¯·æ±‚åœæ­¢æ¨æµå¤±è´¥")}async function se(t,e,n){if(t.cacheStatus===g.DONE)return;const a=await x(),o=new FormData;o.append("file",e,e.name),o.append("fingerprint",n);const r=await fetch("/api/stream/cache",{method:"PUT",headers:{"x-admin-token":a},body:o});if(!r.ok)throw t.cacheStatus=g.ERROR,new Error("UPLOAD_CACHE_FAILED");t.cacheStatus=g.DONE,t.cachedPath=r.path}const Fe=2*60*60,Ce="/stream/ffmpeg";function $e(){return Ce}let N,ee=!1;async function Be(){if(!(N||ee)){if(!re()){console.log("[ffmpeg] client transcode not supported, skip preload");return}ee=!0,d("â³ åˆå§‹åŒ–è½¬ç å¼•æ“â€¦");try{await ie(),d("âœ… è½¬ç å¼•æ“å°±ç»ª")}catch(t){console.warn("[ffmpeg] preload failed",t),d("âš ï¸ å½“å‰æµè§ˆå™¨ä¸æ”¯æŒå®¢æˆ·ç«¯è½¬ç ")}}}async function ie(){if(N)return N;N=new he;const t=$e();return await N.load({coreURL:await J(`${t}/ffmpeg-core.js`,"text/javascript"),wasmURL:await J(`${t}/ffmpeg-core.wasm`,"application/wasm")}),N.on("progress",({progress:e,time:n})=>{if(!U)return;const a=Math.min(99,Math.round(e*100));v(a)}),N.on("error",e=>console.error("[ERROR]",e.message)),N}const G=24;async function te(t,e,n){if(t.duration&&t.duration>Fe)throw new Error("è§†é¢‘æ–‡ä»¶å¤ªå¤§ï¼Œè¯·é‡æ–°ä¸Šä¼ ä¸è¶…è¿‡2Gçš„æ–‡ä»¶ã€‚");U=!0,console.log("[INFO] loading ffmpeg");const a=await ie();console.log("[INFO] load ffmpeg success");const o=`input-${Date.now()}.mp4`,r=`output-${Date.now()}.mp4`;v(0,`å‡†å¤‡è½¬ç ç¬¬ ${e+1}/${n} ä¸ªè§†é¢‘`),await a.writeFile(o,await ge(t));try{console.log("[INFO] start transcoding..."),await a.exec(["-i",o,"-vf",`format=yuv420p,fps=${G}`,"-c:v","libx264","-pix_fmt","yuv420p","-preset","veryfast","-crf","24","-g",String(G*2),"-keyint_min",String(G),"-sc_threshold","0","-c:a","aac","-strict","experimental","-ar","44100","-ac","2","-b:a","128k","-movflags","+faststart",r])}catch(p){throw console.error("[transcode] ffmpeg failed",p),p}finally{U=!1}let l;try{l=await a.readFile(r)}catch(p){throw console.log(`[ERROR] failed to read transcoded data, error:${p}`),p}if(!l||l.length===0)throw console.error("[transcode] empty output file",{file:t.name,size:t.size}),new Error("CLIENT_TRANSCODE_EMPTY_OUTPUT");try{await a.deleteFile(o),await a.deleteFile(r)}catch(p){console.warn(`[WARN] unlink file failed, error: ${p}`)}return console.log("[INFO] finish transcode"),v(100,"âœ… è½¬ç å®Œæˆ"),new File([l.buffer],t.name.replace(/\.\w+$/,".mp4"),{type:"video/mp4"})}async function xe(){!N||!U||(console.warn("[ffmpeg] terminate worker"),await N.terminate(),N=null,U=!1,K.textContent="è½¬ç å·²å–æ¶ˆ",ae.style.width="0%",d("â›” å·²å–æ¶ˆè½¬ç ","info"))}function v(t,e){ne.style.display="block",ae.style.width=`${t}%`,e?K.textContent=e:K.textContent=`è½¬ç ä¸­â€¦ ${t}%`}function Me(){Ne.addEventListener("change",async t=>{Be();const e=Array.from(t.target.files);if(!e.length)return;let n=!1;for(let a=0;a<e.length;a++){const o=e[a],r=oe(o);if(j.has(r))continue;const l=await Pe(o);E.push({index:a,originalFile:o,fingerprint:l,transcodeStatus:f.NONE,cacheStatus:g.NONE,cachedPath:""}),j.add(r),n=!0}t.target.value="",n&&w()}),C.addEventListener("change",()=>{C.value==="loop"&&E.length>0?$.classList.remove("hidden"):$.classList.add("hidden")})}document.addEventListener("DOMContentLoaded",()=>{Se(),Me()});window.start=Ue;window.stop=ve;window.cancelTranscode=xe;window.removeItem=be;window.retryTranscode=Ie;window.retryCacheUpload=Ae;
